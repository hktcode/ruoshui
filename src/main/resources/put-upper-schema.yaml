$schema: http://json-schema.org/draft-04/schema#
type: object
properties:
  consumer:
    type: object
    properties:
      src_property: # TODO:
        type: object
        properties:
          PGDBNAME: { "type":  "string", "default": "postgres"  }
          PGHOST: { "type":  "string", "default": "localhost" }
          PGPORT: { "type": "integer", "default": 5432 }
          user: { "type":  "string", "default": "postgres"  }
          password: { "type": "string" }
      typelist_sql: { "type": "string" } # TODO: default
      tuple_select: { "type": object } # TODO: template
      relation_sql: { "type": "string" } # TODO: default
      logical_repl:
        type: object
        properties:
          slot_name:
            type: string
            default: ruoshui
            pattern: "[0-9a-z_]{1,63}"
          status_interval:
            type: integer
            minimum: 1
            maximum: 2147483647
            default: 10000
          start_position:
            type: "string"
            default: "0/0"
            pattern: "[0-9A-Fa-f]{1,8}/[0-9A-Fa-f]{1,8}"
          publication_names: { "type": "array" } # TODO:
      get_snapshot: { type: boolean, default: true } # TODO:
      rs_fetchsize:
        type: integer
        default: 128
        minimum: 0
        maximum: 2147483647
      standby_skip: { "type": "boolean", "default": true }
      # where_script:
      #   oneOf:
      #     - type: string
      #     - type: object
      #       properties:
      #       engine_name: { type: string } #TODO:
      #       script_text: { type: string }
      locking_mode: { "type": "string" }
      wait_timeout: { "type": "integer", "default": 100 } # TODO:
      log_duration: { "type": "integer", "default": 30000 } # TODO:
  junction:
    type: object
    properties:
      comein_count: { type: integer, default: 100, minimum: 1, maximum: 2147483647 }
      getout_count: { type: integer, default: 100, minimum: 1, maximum: 2147483647 }
      wait_timeout: { type: integer, default: 100 } # TODO:
      log_duration: { type: integer, default: 30000 } # TODO:
  producer:
    type: object
    properties:
      kfk_property: # TODO:
        type: object
        properties:
          bootstrap.servers:
            type: string
            default: "localhost:9092"
      target_topic: { type: string, "default": "ruoshui-upper" } #TODO:
      partition_no: { type: integer, default: 0, minimum: 0, maximum: 2147483647 }
      wait_timeout: { type: integer, default: 100 } # TODO:
      log_duration: { type: integer, default: 30000 } # TODO:
